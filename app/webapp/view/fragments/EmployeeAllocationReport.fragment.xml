<core:FragmentDefinition xmlns:core="sap.ui.core"
                         xmlns="sap.m"
                         xmlns:mdc="sap.ui.mdc"
                         xmlns:mdct="sap.ui.mdc.table"
                         xmlns:mdcvh="sap.ui.mdc.valuehelp"
                         xmlns:mdcvc="sap.ui.mdc.valuehelp.content"
                         xmlns:table="sap.ui.mdc.table"
                         xmlns:layout="sap.f">
    <layout:DynamicPage
        id="employeeAllocationReportDynamicPage"
        fitContent="false"
        preserveHeaderStateOnScroll="false"
        headerExpanded="true"
        toggleHeaderOnTitleClick="false">
       
        <layout:title>
            <layout:DynamicPageTitle>
                <layout:heading>
                    <Title text="Employee Allocation Report" level="H2" />
                </layout:heading>
            </layout:DynamicPageTitle>
        </layout:title>
       
        <layout:header>
            <layout:DynamicPageHeader pinnable="false">
                <VBox class="sapUiTinyMargin">
                    <mdc:FilterBar
                        id="employeeAllocationReportFilterBar"
                        delegate='{
                            "name": "glassboard/delegate/EmployeeAllocationReportFilterBarDelegate",
                            "payload": {
                                "collectionPath": "EmployeeAllocationReport"
                            }
                        }'
                        search="onFilterSearch"
                        showAdaptFiltersButton="true"
                        showGoButton="true"
                        showRestoreButton="true"
                        showVariantManagement="true"
                        variantBackreference="employeeAllocationReportFilterBar"
                        filterConditions="{filterModel>/EmployeeAllocationReport/conditions}"
                        p13nMode="Item,Value">
                        <!-- Static filter items - Default filters -->
                        <mdc:filterItems>
                            <!-- Employee Name Filter with Value Help -->
                            <mdc:FilterField
                                id="filterAllocationEmployeeName"
                                label="Employee Name"
                                width="250px"
                                propertyKey="employeeName"
                                display="Description"
                                editMode="Editable"
                                valueHelp="vhEmployeeName"
                                maxConditions="-1"
                                required="false"
                                caseSensitive="false"
                                conditions="{filterModel>/EmployeeAllocationReport/conditions/employeeName}"
                            >
                                <mdc:dependents>
                                    <mdc:ValueHelp
                                        id="vhEmployeeName"
                                        delegate="{
                                            name: 'glassboard/delegate/SearchValueHelpDelegate',
                                            payload: { searchKeys: ['fullName', 'ohrId'] }
                                        }"
                                    >
                                        <!-- TYPEAHEAD -->
                                        <mdc:typeahead>
                                            <mdcvh:Popover title="Select Employee">
                                                <mdcvc:MTable
                                                    keyPath="fullName"
                                                    descriptionPath="fullName">
                                                    <Table
                                                        id="tblEmployeeTypeahead"
                                                        width="22rem"
                                                        mode="MultiSelect"
                                                        items="{ path: '/EmployeeAllocationReport' }">
                                                        <columns>
                                                            <Column><Text text="Employee Name" /></Column>
                                                            <Column><Text text="OHR ID" /></Column>
                                                        </columns>
                                                        <items>
                                                            <ColumnListItem>
                                                                <Text text="{fullName}" />
                                                                <Text text="{ohrId}" />
                                                            </ColumnListItem>
                                                        </items>
                                                    </Table>
                                                </mdcvc:MTable>
                                            </mdcvh:Popover>
                                        </mdc:typeahead>
 
                                        <!-- DIALOG -->
                                        <mdc:dialog>
                                            <mdcvh:Dialog id="dlgEmployeeVH" title="Select Employee">
                                                <mdcvc:MDCTable keyPath="fullName" descriptionPath="fullName">
                                                    <mdc:Table
                                                        id="tblEmployeeVH"
                                                        autoBindOnInit="true"
                                                        width="100%"
                                                        selectionMode="Multi"
                                                        p13nMode="Column,Sort"
                                                        enableAutoColumnWidth="true"
                                                        threshold="20"
                                                        delegate="{
                                                            name: 'glassboard/delegate/EmployeeAllocationReportTableDelegate',
                                                            payload: {
                                                                collectionPath: 'EmployeeAllocationReport',
                                                                searchKeys: ['employeeName', 'ohrId']
                                                            }
                                                        }"
                                                    >
                                                        <mdc:type>
                                                            <table:GridTableType rowCountMode="Auto" />
                                                        </mdc:type>
                                                        <mdc:columns>
                                                            <mdct:Column
                                                                id="AllocVHcolEmployeeName"
                                                                header="Employee Name"
                                                                propertyKey="fullName"
                                                            >
                                                                <Text text="{fullName}" />
                                                            </mdct:Column>
                                                            <mdct:Column
                                                                id="AllocVHcolOHRId"
                                                                header="OHR ID"
                                                                propertyKey="ohrId"
                                                            >
                                                                <Text text="{ohrId}" />
                                                            </mdct:Column>
                                                        </mdc:columns>
                                                    </mdc:Table>
                                                </mdcvc:MDCTable>
                                            </mdcvh:Dialog>
                                        </mdc:dialog>
                                    </mdc:ValueHelp>
                                </mdc:dependents>
                            </mdc:FilterField>
 
                            <!-- Current Project Filter with Value Help -->
                            <mdc:FilterField
                                id="filterAllocationCurrentProject"
                                label="Current Project"
                                width="250px"
                                propertyKey="currentProject"
                                display="Description"
                                editMode="Editable"
                                valueHelp="vhCurrentProject"
                                maxConditions="-1"
                                required="false"
                                caseSensitive="false"
                                conditions="{filterModel>/EmployeeAllocationReport/conditions/currentProject}"
                            >
                                <mdc:dependents>
                                    <mdc:ValueHelp
                                        id="vhCurrentProject"
                                        delegate="{
                                            name: 'glassboard/delegate/SearchValueHelpDelegate',
                                            payload: { searchKeys: ['projectName', 'sapPId'] }
                                        }"
                                    >
                                        <!-- TYPEAHEAD -->
                                        <mdc:typeahead>
                                            <mdcvh:Popover title="Select Project">
                                                <mdcvc:MTable
                                                    keyPath="projectName"
                                                    descriptionPath="projectName">
                                                    <Table
                                                        id="tblProjectTypeahead1"
                                                        width="22rem"
                                                        mode="MultiSelect"
                                                        items="{ path: '/Projects' }">
                                                        <columns>
                                                            <Column><Text text="Project Name" /></Column>
                                                            <Column><Text text="SAP PID" /></Column>
                                                        </columns>
                                                        <items>
                                                            <ColumnListItem>
                                                                <Text text="{projectName}" />
                                                                <Text text="{sapPId}" />
                                                            </ColumnListItem>
                                                        </items>
                                                    </Table>
                                                </mdcvc:MTable>
                                            </mdcvh:Popover>
                                        </mdc:typeahead>
 
                                        <!-- DIALOG -->
                                        <mdc:dialog>
                                            <mdcvh:Dialog id="dlgProjectVH1" title="Select Project">
                                                <mdcvc:MDCTable keyPath="projectName" descriptionPath="projectName">
                                                    <mdc:Table
                                                        id="tblProjectVH1"
                                                        autoBindOnInit="true"
                                                        width="100%"
                                                        selectionMode="Multi"
                                                        p13nMode="Column,Sort"
                                                        enableAutoColumnWidth="true"
                                                        threshold="20"
                                                        delegate="{
                                                            name: 'glassboard/delegate/EmployeeAllocationReportTableDelegate',
                                                            payload: {
                                                                collectionPath: 'EmployeeAllocationReport',
                                                                searchKeys: ['projectName', 'sapPId']
                                                            }
                                                        }"
                                                    >
                                                        <mdc:type>
                                                            <table:GridTableType rowCountMode="Auto" />
                                                        </mdc:type>
                                                        <mdc:columns>
                                                            <mdct:Column
                                                                id="AllocVHcolProjectName"
                                                                header="Project Name"
                                                                propertyKey="projectName"
                                                            >
                                                                <Text text="{projectName}" />
                                                            </mdct:Column>
                                                            <mdct:Column
                                                                id="AllocVHcolSapPID"
                                                                header="SAP PID"
                                                                propertyKey="sapPId"
                                                            >
                                                                <Text text="{sapPId}" />
                                                            </mdct:Column>
                                                        </mdc:columns>
                                                    </mdc:Table>
                                                </mdcvc:MDCTable>
                                            </mdcvh:Dialog>
                                        </mdc:dialog>
                                    </mdc:ValueHelp>
                                </mdc:dependents>
                            </mdc:FilterField>
 
                            <!-- Customer Filter with Value Help -->
                            <mdc:FilterField
                                id="filterAllocationCustomer"
                                label="Customer"
                                width="250px"
                                propertyKey="customer"
                                display="Description"
                                editMode="Editable"
                                valueHelp="vhCustomer"
                                maxConditions="-1"
                                required="false"
                                caseSensitive="false"
                                conditions="{filterModel>/EmployeeAllocationReport/conditions/customer}"
                            >
                                <mdc:dependents>
                                    <mdc:ValueHelp
                                        id="vhCustomer"
                                        delegate="{
                                            name: 'glassboard/delegate/SearchValueHelpDelegate',
                                            payload: { searchKeys: ['customerName', 'vertical'] }
                                        }"
                                    >
                                        <!-- TYPEAHEAD -->
                                        <mdc:typeahead>
                                            <mdcvh:Popover title="Select Customer">
                                                <mdcvc:MTable
                                                    keyPath="customerName"
                                                    descriptionPath="customerName">
                                                    <Table
                                                        id="tblCustomerTypeahead1"
                                                        width="22rem"
                                                        mode="MultiSelect"
                                                        items="{ path: '/Customers' }">
                                                        <columns>
                                                            <Column><Text text="Customer Name" /></Column>
                                                            <Column><Text text="Vertical" /></Column>
                                                        </columns>
                                                        <items>
                                                            <ColumnListItem>
                                                                <Text text="{customerName}" />
                                                                <Text text="{vertical}" />
                                                            </ColumnListItem>
                                                        </items>
                                                    </Table>
                                                </mdcvc:MTable>
                                            </mdcvh:Popover>
                                        </mdc:typeahead>
 
                                        <!-- DIALOG -->
                                        <mdc:dialog>
                                            <mdcvh:Dialog id="dlgCustomerVH1" title="Select Customer">
                                                <mdcvc:MDCTable keyPath="customerName" descriptionPath="customerName">
                                                    <mdc:Table
                                                        id="tblCustomerVH1"
                                                        autoBindOnInit="true"
                                                        width="100%"
                                                        selectionMode="Multi"
                                                        p13nMode="Column,Sort"
                                                        enableAutoColumnWidth="true"
                                                        threshold="20"
                                                        delegate="{
                                                            name: 'glassboard/delegate/EmployeeAllocationReportTableDelegate',
                                                            payload: {
                                                                collectionPath: 'EmployeeAllocationReport',
                                                                searchKeys: ['customerName', 'vertical']
                                                            }
                                                        }"
                                                    >
                                                        <mdc:type>
                                                            <table:GridTableType rowCountMode="Auto" />
                                                        </mdc:type>
                                                        <mdc:columns>
                                                            <mdct:Column
                                                                id="AllocVHcolCustomerName"
                                                                header="Customer Name"
                                                                propertyKey="customerName"
                                                            >
                                                                <Text text="{customerName}" />
                                                            </mdct:Column>
                                                            <mdct:Column
                                                                id="AllocVHcolVertical"
                                                                header="Vertical"
                                                                propertyKey="vertical"
                                                            >
                                                                <Text text="{vertical}" />
                                                            </mdct:Column>
                                                        </mdc:columns>
                                                    </mdc:Table>
                                                </mdcvc:MDCTable>
                                            </mdcvh:Dialog>
                                        </mdc:dialog>
                                    </mdc:ValueHelp>
                                </mdc:dependents>
                            </mdc:FilterField>
                        </mdc:filterItems>
                    </mdc:FilterBar>
                </VBox>
            </layout:DynamicPageHeader>
        </layout:header>
       
        <layout:content>
            <VBox class="sapUiSmallMargin">
                <Panel class="sapUiResponsiveMargin" expandable="false">
                    <ScrollContainer height="600px" vertical="true" horizontal="false">
                        <mdc:Table
                            id="EmployeeAllocationReportTable"
                            header="Employee Allocation Report"
                            class="verticalsTable rowDetailToggleTable"
                            autoBindOnInit="true"
                            busyIndicatorDelay="0"
                            width="100%"
                            p13nMode="Column,Sort,Filter,Group"
                            selectionMode="None"
                            type="Table"
                            delegate='{
                                "name": "glassboard/delegate/EmployeeAllocationReportTableDelegate",
                                "payload": {
                                    "collectionPath": "EmployeeAllocationReport"
                                }
                            }'
                            showRowCount="true"
                            threshold="20"
                            enableExport="true"
                            enableAutoColumnWidth="false"
                            filter="employeeAllocationReportFilterBar"
                            filterConditions="{filterModel>/EmployeeAllocationReport/conditions}">
                           
                         
                            <mdc:actions>
                                <SegmentedButton
                                    selectedKey="less"
                                    selectionChange="onToggleRowDetail"
                                    tooltip="Toggle Row Details">
                                    <items>
                                        <SegmentedButtonItem key="more" icon="sap-icon://detail-more" tooltip="Show More"/>
                                        <SegmentedButtonItem key="less" icon="sap-icon://detail-less" tooltip="Show Less"/>
                                    </items>
                                </SegmentedButton>
                            </mdc:actions>
                        </mdc:Table>
                    </ScrollContainer>
                </Panel>
            </VBox>
        </layout:content>
    </layout:DynamicPage>
</core:FragmentDefinition>
 
 
 