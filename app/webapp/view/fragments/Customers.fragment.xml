<core:FragmentDefinition
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:f="sap.ui.layout.form"
    xmlns:mdc="sap.ui.mdc"
    xmlns:table="sap.ui.mdc.table"
    xmlns:layout="sap.f"
>
    <layout:DynamicPage
        id="customerDynamicPage"
        fitContent="false"
        preserveHeaderStateOnScroll="false"
        headerExpanded="true"
        toggleHeaderOnTitleClick="false"
    >
        <!-- Optional Page Title -->
        <layout:title>
            <layout:DynamicPageTitle>
                <layout:heading>
                    <Title
                        text="Customer Management"
                        level="H2"
                    />
                </layout:heading>
            </layout:DynamicPageTitle>
        </layout:title>

        <!-- ========== FILTERBAR ========== -->
        <layout:header>
            <layout:DynamicPageHeader pinnable="false">
                <VBox class="sapUiTinyMargin">
                    <mdc:FilterBar
                        id="customerFilterBar"
                        delegate='{
                    "name": "glassboard/delegate/CustomersFilterBarDelegate",
                    "payload": {
                        "collectionPath": "Customers"
                    }
                }'
                        search="onFilterSearch"
                        showAdaptFiltersButton="true"
                        showGoButton="true"
                        showRestoreButton="true"
                        showVariantManagement="true"
                        variantBackreference="customerFilterBar"
                        filterConditions="{filterModel>/Customers/conditions}"
                        p13nMode="Item,Value"
                    >
                        <!-- Static filter items - Default filters -->
                        <mdc:filterItems>
                            <!-- Customer Name Filter -->
                            <mdc:FilterField
                                id="filterCustomerName"
                                label="Customer Name"
                                conditions="{filterModel>/Customers/conditions/customerName}"
                                propertyKey="customerName"
                                maxConditions="-1"
                                required="false"
                                caseSensitive="false"
                                width="250px"
                                delegate='{
                                    "name": "sap/ui/mdc/field/FieldBaseDelegate",
                                    "payload": {}
                                }'
                            />
                            <!-- Vertical Filter -->
                            <mdc:FilterField
                                id="filterVertical"
                                label="Vertical"
                                conditions="{filterModel>/Customers/conditions/vertical}"
                                propertyKey="vertical"
                                maxConditions="-1"
                                required="false"
                                caseSensitive="false"
                                width="200px"
                                delegate='{
                                    "name": "sap/ui/mdc/field/FieldBaseDelegate",
                                    "payload": {}
                                }'
                            />
                        </mdc:filterItems>
                    </mdc:FilterBar>
                </VBox>
            </layout:DynamicPageHeader>
        </layout:header>

        <!-- ========== MAIN CONTENT ========== -->
        <layout:content>
            <VBox class="sapUiSmallMargin">
                <!-- ===== TABLE PANEL ===== -->
                <Panel
                    class="sapUiResponsiveMargin"
                    expandable="false"
                >
                    <Toolbar>
                        <ToolbarSpacer />
                        <SearchField
                            id="customerSearchField"
                            width="300px"
                            placeholder="Search customers..."
                            liveChange="onCustomerSearch"
                            search="onCustomerSearch"
                        />
                    </Toolbar>
                    <ScrollContainer
                        height="220px"
                        vertical="true"
                        horizontal="false"
                    >
                        <mdc:Table
                            id="Customers"
                            header="Customers"
                            class="verticalsTable rowDetailToggleTable"
                            autoBindOnInit="false"
                            busyIndicatorDelay="0"
                            width="100%"
                            p13nMode="Column,Sort,Filter,Group"
                            selectionMode="Single"
                            delegate='{
                        "name": "glassboard/delegate/CustomersTableDelegate",
                        "payload": {
                            "collectionPath": "Customers"
                        }
                    }'
                            showRowCount="true"
                            threshold="1000"
                            enableExport="true"
                            enableAutoColumnWidth="false"
                            filter="customerFilterBar"
                            filterConditions="{filterModel>/Customers/conditions}"
                            selectionChange="onSelectionChange"
                            type="ResponsiveTable"
                        >
                            <mdc:type>
                                <table:ResponsiveTableType />
                            </mdc:type>
                            <mdc:actions>
                                <SegmentedButton
                                    selectedKey="less"
                                    selectionChange="onToggleRowDetail"
                                    tooltip="Toggle Row Details"
                                >
                                    <items>
                                        <SegmentedButtonItem
                                            key="more"
                                            icon="sap-icon://detail-more"
                                            tooltip="Show More"
                                        />
                                        <SegmentedButtonItem
                                            key="less"
                                            icon="sap-icon://detail-less"
                                            tooltip="Show Less"
                                        />
                                    </items>
                                </SegmentedButton>
                                <Button
                                    icon="sap-icon://delete"
                                    id="btnDelete_cus"
                                    tooltip="Delete"
                                    press="onDeletePress"
                                    enabled="false"
                                />
                                <SplitButton
                                    id="customerUpload"
                                    icon="sap-icon://upload"
                                    tooltip="Upload"
                                    type="Transparent"
                                    press="onUpload"
                                    arrowPress="onSplitButtonArrowPress"
                                />
                            </mdc:actions>
                        </mdc:Table>
                    </ScrollContainer>
                </Panel>

                <!-- ===== SPACE BETWEEN TABLE AND FORM ===== -->
                <HBox
                    width="100%"
                    class="extraSpace"
                >
                    <ToolbarSpacer />
                </HBox>

                <!-- ===== FORM PANEL ===== -->
                <Panel
                    headerText="Customer Details"
                    class="sapUiResponsiveMargin"
                    expandable="false"
                >
                    <headerToolbar>
                        <Toolbar>
                            <Title
                                text="Customer Details"
                                level="H2"
                            />
                            <ToolbarSpacer />
                            <Button
                                id="editButton_cus"
                                text="Edit"
                                type="Emphasized"
                                press="onEditCustomerForm"
                                enabled="false"
                                class="sapUiSmallMarginEnd"
                            />
                            <Button
                                id="submitButton_cus"
                                text="Submit"
                                type="Accept"
                                press="onSubmitCustomer"
                            />
                            <Button
                                id="cancelFormButton_cus"
                                text="Cancel"
                                type="Reject"
                                press="onCancelForm"
                                class="sapUiSmallMarginBegin"
                            />
                        </Toolbar>
                    </headerToolbar>
                    <VBox class="sapUiSmallMargin">
                        <HBox width="100%">
                            <!-- Left Column -->
                            <VBox
                                width="50%"
                                class="sapUiSmallMarginEnd"
                            >
                                <f:SimpleForm
                                    layout="ResponsiveGridLayout"
                                    editable="true"
                                    labelSpanL="3"
                                    labelSpanM="3"
                                    adjustLabelSpan="false"
                                    emptySpanL="1"
                                    emptySpanM="1"
                                    columnsL="1"
                                    columnsM="1"
                                    class="sapUiNoContentPadding"
                                >
                                    <Label text="Customer ID" />
                                    <Input
                                        id="inputCustomerId"
                                        value="{customerModel>/SAPcustId}"
                                        width="100%"
                                        enabled="false"
                                        placeholder="Auto-generated"
                                        visible="false"
                                    />
                                    <Label
                                        text="Customer Name"
                                        required="true"
                                    />
                                    <Input
                                        id="inputCustomerName"
                                        value="{customerModel>/customerName}"
                                        width="100%"
                                        required="true"
                                    />
                                    <!-- COUNTRY -->
                                    <Label
                                        text="Country"
                                        required="true"
                                    />
                                    <ComboBox
                                        id="countryComboBox"
                                        selectedKey="{customerModel>/custCountryId}"
                                        selectionChange="onCountryChange"
                                        width="100%"
                                        showClearIcon="true"
                                        items="{
                                    path: 'default>/CustomerCountries',
                                    sorter: { path: 'name' }
                                }"
                                    >
                                        <core:ListItem
                                            key="{default>id}"
                                            text="{default>name}"
                                        />
                                    </ComboBox>
                                    <!-- STATE -->
                                    <Label text="State" />
                                    <ComboBox
                                        id="stateComboBox"
                                        selectedKey="{customerModel>/custStateId}"
                                        selectionChange="onStateChange"
                                        width="100%"
                                        showClearIcon="true"
                                        enabled="false"
                                    >
                                        <core:ListItem
                                            key=""
                                            text="Select State..."
                                        />
                                    </ComboBox>
                                    <!-- CITY -->
                                    <Label text="City" />
                                    <ComboBox
                                        id="cityComboBox"
                                        selectedKey="{customerModel>/custCityId}"
                                        selectionChange="onCityChange"
                                        width="100%"
                                        showClearIcon="true"
                                        enabled="false"
                                    >
                                        <core:ListItem
                                            key=""
                                            text="Select City..."
                                        />
                                    </ComboBox>
                                </f:SimpleForm>
                            </VBox>

                            <!-- Right Column -->
                            <VBox
                                width="50%"
                                class="sapUiSmallMarginBegin"
                            >
                                <f:SimpleForm
                                    layout="ResponsiveGridLayout"
                                    editable="true"
                                    labelSpanL="3"
                                    labelSpanM="3"
                                    adjustLabelSpan="false"
                                    emptySpanL="1"
                                    emptySpanM="1"
                                    columnsL="1"
                                    columnsM="1"
                                    class="sapUiNoContentPadding"
                                >
                                    <Label
                                        text="Vertical"
                                        required="true"
                                    />
                                    <Select
                                        id="inputVertical"
                                        selectedKey="{customerModel>/vertical}"
                                        width="100%"
                                        required="true"
                                    >
                                        <items>
                                            <core:Item
                                                key=""
                                                text="Select Vertical..."
                                            />
                                            <core:Item
                                                key="BFS"
                                                text="BFS"
                                            />
                                            <core:Item
                                                key="CapitalMarkets"
                                                text="Capital Markets"
                                            />
                                            <core:Item
                                                key="CPG"
                                                text="CPG"
                                            />
                                            <core:Item
                                                key="Healthcare"
                                                text="Healthcare"
                                            />
                                            <core:Item
                                                key="HighTech"
                                                text="High Tech"
                                            />
                                            <core:Item
                                                key="Insurance"
                                                text="Insurance"
                                            />
                                            <core:Item
                                                key="LifeSciences"
                                                text="Life Sciences"
                                            />
                                            <core:Item
                                                key="Manufacturing"
                                                text="Manufacturing"
                                            />
                                            <core:Item
                                                key="Retail"
                                                text="Retail"
                                            />
                                            <core:Item
                                                key="Services"
                                                text="Services"
                                            />
                                        </items>
                                    </Select>
                                    <Label text="Start Date" />
                                    <DatePicker
                                        id="inputStartDate_cus"
                                        value="{customerModel>/startDate}"
                                        valueFormat="yyyy-MM-dd"
                                        displayFormat="short"
                                        width="100%"
                                    />
                                    <Label text="End Date" />
                                    <DatePicker
                                        id="inputEndDate_cus"
                                        value="{customerModel>/endDate}"
                                        valueFormat="yyyy-MM-dd"
                                        displayFormat="short"
                                        width="100%"
                                    />
                                    <Label
                                        text="Status"
                                        required="true"
                                    />
                                    <Select
                                        id="inputStatus"
                                        selectedKey="{customerModel>/status}"
                                        width="100%"
                                        required="true"
                                    >
                                        <items>
                                            <core:Item
                                                key=""
                                                text="Select Status..."
                                            />
                                            <core:Item
                                                key="Active"
                                                text="Active"
                                            />
                                            <core:Item
                                                key="Inactive"
                                                text="Inactive"
                                            />
                                            <core:Item
                                                key="Prospect"
                                                text="Prospect"
                                            />
                                        </items>
                                    </Select>
                                </f:SimpleForm>
                            </VBox>
                        </HBox>
                    </VBox>
                </Panel>
            </VBox>
        </layout:content>
    </layout:DynamicPage>
</core:FragmentDefinition>
